<script>
    // Vari√°veis do jogo
    let saldo = Number(localStorage.getItem('saldo')) || 0;
    let valorAposta = 0;
    let multiplicadorAtual = 1;
    let fogueteInterval;
    let alturaAtual = 0;
    let velocidade = 0.5;
    let chanceExplosao = 0.001;
    let fumacaInterval;

    // Atualiza o saldo na tela
    function updateSaldo() {
        const saldoDisplay = document.getElementById('saldo-value');

        if (saldoDisplay) {
            saldoDisplay.textContent = saldo.toFixed(2);
        } else {
            console.error("Erro: Elemento do saldo n√£o encontrado!");
        }
    }

    // Inicializa o jogo ao carregar a p√°gina
    document.addEventListener('DOMContentLoaded', function() {
        updateSaldo();
    });

    // Inicia o jogo
    function iniciarJogo() {
        valorAposta = Number(document.getElementById('valorAposta').value);
        
        if (valorAposta < 1 || valorAposta > saldo) {
            alert('Aposta inv√°lida ou saldo insuficiente!');
            return;
        }

        // Deduz aposta do saldo
        saldo -= valorAposta;
        localStorage.setItem('saldo', saldo);
        updateSaldo();

        document.getElementById('aposta-value').textContent = valorAposta.toFixed(2);
        document.getElementById('resultado').textContent = '';
        document.getElementById('pararBtn').disabled = false;
        
        // Resetando configura√ß√µes do foguete
        multiplicadorAtual = 1;
        alturaAtual = 0;
        velocidade = 0.5;
        chanceExplosao = 0.001;

        // Inicia o movimento do foguete
        fogueteInterval = setInterval(() => {
            velocidade *= 1.003;
            multiplicadorAtual += 0.01 * velocidade;
            alturaAtual += velocidade;

            document.getElementById('foguete').style.transform = `translateX(-50%) translateY(-${alturaAtual}px)`;
            document.getElementById('multiplicador-display').textContent = multiplicadorAtual.toFixed(2) + 'x';

            // Aumenta a chance de explos√£o
            chanceExplosao += 0.0001 * velocidade;
            
            if (Math.random() < chanceExplosao) {
                explodirFoguete();
            }
        }, 50);
    }

    // Fun√ß√£o para explodir o foguete
    function explodirFoguete() {
        clearInterval(fogueteInterval);
        document.getElementById('foguete').textContent = 'üí•';
        document.getElementById('resultado').textContent = `üí• Foguete explodiu em ${multiplicadorAtual.toFixed(2)}x!`;
        document.getElementById('pararBtn').disabled = true;
    }

    // Para o jogo e adiciona o saldo
    function pararJogo() {
        console.log("Parar jogo acionado!");
        clearInterval(fogueteInterval);

        const ganhoBruto = valorAposta * multiplicadorAtual;
        console.log(`Ganho bruto: ${ganhoBruto}`);

        // Adiciona o saldo ganho
        saldo += ganhoBruto;
        localStorage.setItem('saldo', saldo);
        updateSaldo();

        document.getElementById('pararBtn').disabled = true;
        document.getElementById('resultado').textContent = `‚úÖ Voc√™ ganhou R$ ${ganhoBruto.toFixed(2)}!`;
    }
</script>
